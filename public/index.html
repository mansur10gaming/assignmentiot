<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="E-Commerce Management System - Manage customers, employees, products, and orders">
  <title>E-Commerce API</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header class="app-header">
      <div class="header-content">
        <div>
          <h1>üì¶ E-Commerce Dashboard</h1>
          <p>Manage customers, employees, products and orders with ease</p>
        </div>
        <div class="header-status">
          <span class="status-badge online">‚óè Online</span>
        </div>
      </div>
    </header>

    <nav class="nav-tabs" aria-label="Main tabs">
      <button class="nav-tab active" onclick="switchTab(this, 'customers')">Customers</button>
      <button class="nav-tab" onclick="switchTab(this, 'employees')">Employees</button>
      <button class="nav-tab" onclick="switchTab(this, 'products')">Products</button>
      <button class="nav-tab" onclick="switchTab(this, 'orders')">Orders</button>
    </nav>

    <div class="content">
      <!-- customers tab -->
      <div id="customers" class="tab-content active">
        <div class="section">
          <h2>Add Customer</h2>
          <div id="customerAlert" class="alert"></div>
          <div class="form-group">
            <div class="form-row">
              <div>
                <label>First Name:</label>
                <input type="text" id="customerFirstName" placeholder="Name">
              </div>
              <div>
                <label>Last Name:</label>
                <input type="text" id="customerLastName" placeholder="lastName">
              </div>
            </div>
            <div class="form-row">
              <div>
                <label>Email:</label>
                <input type="email" id="customerEmail" placeholder="example@example.com">
              </div>
              <div>
                <label>Phone:</label>
                <input type="tel" id="customerPhone" placeholder="+1234567890">
              </div>
            </div>
            <div class="form-row full">
              <div class="address-section">
                <label style="margin-bottom: 10px; display: block; font-weight: 600;">Address (Optional):</label>
                <div class="form-row">
                  <input type="text" id="customerStreet" placeholder="Street">
                  <input type="text" id="customerCity" placeholder="City">
                </div>
                <div class="form-row">
                  <input type="text" id="customerState" placeholder="State">
                  <input type="text" id="customerPostal" placeholder="Postal Code">
                </div>
                <input type="text" id="customerCountry" placeholder="Country" style="margin-top: 10px;">
              </div>
            </div>
          </div>
          <button onclick="addCustomer()">Add Customer</button>
          <button class="btn-secondary" onclick="clearCustomerForm()">Clear</button>
        </div>

        <div class="section">
          <h2>Customers List</h2>
          <div id="customersLoading" class="loading">Loading</div>
          <table id="customersTable" class="data-table" style="display: none;">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>City</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="customersBody"></tbody>
          </table>
          <div id="customersEmpty" class="empty-state" style="display: none;">
            <p>No customers yet. Add one to get started!</p>
          </div>
        </div>
      </div>

      <!-- employees tab -->
      <div id="employees" class="tab-content">
        <div class="section">
          <h2>Add Employee</h2>
          <div id="employeeAlert" class="alert"></div>
          <div class="form-group">
            <div class="form-row">
              <div>
                <label>First Name:</label>
                <input type="text" id="employeeFirstName" placeholder="Name">
              </div>
              <div>
                <label>Last Name:</label>
                <input type="text" id="employeeLastName" placeholder="lastName">
              </div>
            </div>
            <div class="form-row">
              <div>
                <label>Email:</label>
                <input type="email" id="employeeEmail" placeholder="example@example.com">
              </div>
              <div>
                <label>Phone:</label>
                <input type="tel" id="employeePhone" placeholder="+1234567890">
              </div>
            </div>
            <div class="form-row">
              <div>
                <label>Position:</label>
                <select id="employeePosition">
                  <option value="Sales Representative">Sales Representative</option>
                  <option value="Manager">Manager</option>
                  <option value="Inventory Specialist">Inventory Specialist</option>
                  <option value="Customer Support">Customer Support</option>
                  <option value="Admin">Admin</option>
                </select>
              </div>
              <div>
                <label>Department:</label>
                <input type="text" id="employeeDepartment" placeholder="Sales">
              </div>
            </div>
            <div class="form-row">
              <div>
                <label>Salary:</label>
                <input type="number" id="employeeSalary" placeholder="50000">
              </div>
              <div>
                <label>Hire Date:</label>
                <input type="date" id="employeeHireDate">
              </div>
            </div>
          </div>
          <button onclick="addEmployee()">Add Employee</button>
          <button class="btn-secondary" onclick="clearEmployeeForm()">Clear</button>
        </div>

        <div class="section">
          <h2>Employees List</h2>
          <div id="employeesLoading" class="loading">Loading</div>
          <table id="employeesTable" class="data-table" style="display: none;">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Position</th>
                <th>Department</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="employeesBody"></tbody>
          </table>
          <div id="employeesEmpty" class="empty-state" style="display: none;">
            <p>No employees yet. Add one to get started!</p>
          </div>
        </div>
      </div>

      <!-- products tab -->
      <div id="products" class="tab-content">
        <div class="section">
          <h2>Add Product</h2>
          <div id="productAlert" class="alert"></div>
          <div class="form-group">
            <div class="form-row">
              <div>
                <label>Product Name:</label>
                <input type="text" id="productName" placeholder="Laptop">
              </div>
              <div>
                <label>SKU:</label>
                <input type="text" id="productSku" placeholder="SKU-001">
              </div>
            </div>
            <div class="form-row">
              <div>
                <label>Price:</label>
                <input type="number" id="productPrice" placeholder="999.99" step="0.01">
              </div>
              <div>
                <label>Category:</label>
                <input type="text" id="productCategory" placeholder="Electronics">
              </div>
            </div>
            <div class="form-row">
              <div>
                <label>Quantity:</label>
                <input type="number" id="productQuantity" placeholder="100" min="0">
              </div>
              <div>
                <label>Manufacturer:</label>
                <input type="text" id="productManufacturer" placeholder="Dell">
              </div>
            </div>
            <div class="form-row full">
              <div>
                <label>Description:</label>
                <textarea id="productDescription" placeholder="Product description..."></textarea>
              </div>
            </div>
          </div>
          <button onclick="addProduct()">Add Product</button>
          <button class="btn-secondary" onclick="clearProductForm()">Clear</button>
        </div>

        <div class="section">
          <h2>Products List</h2>
          <div id="productsLoading" class="loading">Loading</div>
          <table id="productsTable" class="data-table" style="display: none;">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>SKU</th>
                <th>Price</th>
                <th>Category</th>
                <th>Quantity</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="productsBody"></tbody>
          </table>
          <div id="productsEmpty" class="empty-state" style="display: none;">
            <p>No products yet. Add one to get started!</p>
          </div>
        </div>
      </div>

      <!-- orders tab -->
      <div id="orders" class="tab-content">
        <div class="section">
          <h2>Create Order</h2>
          <div id="orderAlert" class="alert"></div>
          <div class="form-group">
            <div class="form-row">
              <div>
                <label>Customer:</label>
                <select id="orderCustomer">
                  <option value="">-- Select Customer --</option>
                </select>
              </div>
              <div>
                <label>Product:</label>
                <select id="orderProduct">
                  <option value="">-- Select Product --</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div>
                <label>Quantity:</label>
                <input type="number" id="orderQuantity" placeholder="1" min="1">
              </div>
              <div>
                <label>Status:</label>
                <select id="orderStatus">
                  <option value="Pending">Pending</option>
                  <option value="Processing">Processing</option>
                  <option value="Shipped">Shipped</option>
                  <option value="Delivered">Delivered</option>
                  <option value="Cancelled">Cancelled</option>
                </select>
              </div>
            </div>
            <div class="form-row">
              <div>
                <label>Tax:</label>
                <input type="number" id="orderTax" placeholder="0" step="0.01" value="0">
              </div>
              <div>
                <label>Shipping Cost:</label>
                <input type="number" id="orderShipping" placeholder="0" step="0.01" value="0">
              </div>
            </div>
            <div class="form-row full">
              <div>
                <label>Notes:</label>
                <textarea id="orderNotes" placeholder="Order notes..."></textarea>
              </div>
            </div>
          </div>
          <button onclick="addOrder()">Create Order</button>
          <button class="btn-secondary" onclick="clearOrderForm()">Clear</button>
        </div>

        <div class="section">
          <h2>Orders List</h2>
          <div id="ordersLoading" class="loading">Loading</div>
          <table id="ordersTable" class="data-table" style="display: none;">
            <thead>
              <tr>
                <th>Order #</th>
                <th>Customer</th>
                <th>Items</th>
                <th>Total</th>
                <th>Status</th>
                <th>Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="ordersBody"></tbody>
          </table>
          <div id="ordersEmpty" class="empty-state" style="display: none;">
            <p>No orders yet. Create one to get started!</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const API_URL = 'http://localhost:3000/api';

    //tab switching - accept the clicked element for more robust behavior
    function switchTab(el, tabName) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.nav-tab').forEach(btn => btn.classList.remove('active'));

      document.getElementById(tabName).classList.add('active');
      if (el && el.classList) el.classList.add('active');

      if (tabName === 'customers') loadCustomers();
      else if (tabName === 'employees') loadEmployees();
      else if (tabName === 'products') loadProducts();
      else if (tabName === 'orders') loadOrders();
    }

    //alert functions
    function showAlert(elementId, message, type) {
      const alert = document.getElementById(elementId);
      alert.textContent = message;
      alert.className = `alert ${type}`;
      setTimeout(() => {
        alert.className = 'alert';
      }, 4000);
    }

    //customer functions
    function addCustomer() {
      const firstName = document.getElementById('customerFirstName').value;
      const lastName = document.getElementById('customerLastName').value;
      const email = document.getElementById('customerEmail').value;
      const phone = document.getElementById('customerPhone').value;

      if (!firstName || !lastName || !email || !phone) {
        showAlert('customerAlert', 'Please fill in all required fields', 'error');
        return;
      }

      const address = {
        street: document.getElementById('customerStreet').value,
        city: document.getElementById('customerCity').value,
        state: document.getElementById('customerState').value,
        postalCode: document.getElementById('customerPostal').value,
        country: document.getElementById('customerCountry').value
      };

      fetch(`${API_URL}/customers`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ firstName, lastName, email, phone, address })
      })
      .then(res => {
        if (!res.ok) {
          return res.json().then(data => Promise.reject(data));
        }
        return res.json();
      })
      .then(data => {
        showAlert('customerAlert', 'Customer added successfully!', 'success');
        clearCustomerForm();
        loadCustomers();
      })
      .catch(err => {
        const message = err.message || 'Error adding customer';
        showAlert('customerAlert', message, 'error');
        console.error('Customer error:', err);
      });
    }

    function clearCustomerForm() {
      document.getElementById('customerFirstName').value = '';
      document.getElementById('customerLastName').value = '';
      document.getElementById('customerEmail').value = '';
      document.getElementById('customerPhone').value = '';
      document.getElementById('customerStreet').value = '';
      document.getElementById('customerCity').value = '';
      document.getElementById('customerState').value = '';
      document.getElementById('customerPostal').value = '';
      document.getElementById('customerCountry').value = '';
    }

    function loadCustomers() {
      document.getElementById('customersLoading').style.display = 'block';
      document.getElementById('customersTable').style.display = 'none';

      fetch(`${API_URL}/customers`)
      .then(res => res.json())
      .then(data => {
        const tbody = document.getElementById('customersBody');
        tbody.innerHTML = '';

        if (data.customers.length === 0) {
          document.getElementById('customersEmpty').style.display = 'block';
          document.getElementById('customersTable').style.display = 'none';
          document.getElementById('customersLoading').style.display = 'none';
          return;
        }

        document.getElementById('customersEmpty').style.display = 'none';
        document.getElementById('customersTable').style.display = 'table';

        data.customers.forEach(customer => {
          const row = `
            <tr>
              <td>${customer._id.substring(0, 8)}...</td>
              <td>${customer.firstName} ${customer.lastName}</td>
              <td>${customer.email}</td>
              <td>${customer.phone}</td>
              <td>${customer.address?.city || '-'}</td>
              <td class="action-buttons">
                <button class="btn-danger" onclick="deleteCustomer('${customer._id}')">Delete</button>
              </td>
            </tr>
          `;
          tbody.innerHTML += row;
        });

        document.getElementById('customersLoading').style.display = 'none';
      })
      .catch(err => {
        showAlert('customerAlert', 'Error loading customers', 'error');
        document.getElementById('customersLoading').style.display = 'none';
      });
    }

    function deleteCustomer(id) {
      if (confirm('Are you sure?')) {
        fetch(`${API_URL}/customers/${id}`, { method: 'DELETE' })
        .then(res => {
          if (!res.ok) {
            return res.json().then(data => Promise.reject(data));
          }
          return res.json();
        })
        .then(() => {
          showAlert('customerAlert', 'Deleted!', 'success');
          loadCustomers();
        })
        .catch(err => {
          const message = err.message || 'Error deleting customer';
          showAlert('customerAlert', message, 'error');
          console.error('Delete error:', err);
        });
      }
    }

    //employee functions
    function addEmployee() {
      const firstName = document.getElementById('employeeFirstName').value;
      const lastName = document.getElementById('employeeLastName').value;
      const email = document.getElementById('employeeEmail').value;
      const phone = document.getElementById('employeePhone').value;
      const position = document.getElementById('employeePosition').value;
      const department = document.getElementById('employeeDepartment').value;
      const salary = parseFloat(document.getElementById('employeeSalary').value) || 0;
      const hireDate = document.getElementById('employeeHireDate').value;

      if (!firstName || !lastName || !email || !phone || !department) {
        showAlert('employeeAlert', 'Please fill in all required fields', 'error');
        return;
      }

      fetch(`${API_URL}/employees`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ firstName, lastName, email, phone, position, department, salary, hireDate })
      })
      .then(res => {
        if (!res.ok) {
          return res.json().then(data => Promise.reject(data));
        }
        return res.json();
      })
      .then(data => {
        showAlert('employeeAlert', 'Employee added successfully!', 'success');
        clearEmployeeForm();
        loadEmployees();
      })
      .catch(err => {
        const message = err.message || 'Error adding employee';
        showAlert('employeeAlert', message, 'error');
        console.error('Employee error:', err);
      });
    }

    function clearEmployeeForm() {
      document.getElementById('employeeFirstName').value = '';
      document.getElementById('employeeLastName').value = '';
      document.getElementById('employeeEmail').value = '';
      document.getElementById('employeePhone').value = '';
      document.getElementById('employeePosition').value = 'Sales Representative';
      document.getElementById('employeeDepartment').value = '';
      document.getElementById('employeeSalary').value = '';
      document.getElementById('employeeHireDate').value = '';
    }

    function loadEmployees() {
      document.getElementById('employeesLoading').style.display = 'block';
      document.getElementById('employeesTable').style.display = 'none';

      fetch(`${API_URL}/employees`)
      .then(res => res.json())
      .then(data => {
        const tbody = document.getElementById('employeesBody');
        tbody.innerHTML = '';

        if (data.employees.length === 0) {
          document.getElementById('employeesEmpty').style.display = 'block';
          document.getElementById('employeesTable').style.display = 'none';
          document.getElementById('employeesLoading').style.display = 'none';
          return;
        }

        document.getElementById('employeesEmpty').style.display = 'none';
        document.getElementById('employeesTable').style.display = 'table';

        data.employees.forEach(employee => {
          const row = `
            <tr>
              <td>${employee._id.substring(0, 8)}...</td>
              <td>${employee.firstName} ${employee.lastName}</td>
              <td>${employee.email}</td>
              <td>${employee.position}</td>
              <td>${employee.department}</td>
              <td class="action-buttons">
                <button class="btn-danger" onclick="deleteEmployee('${employee._id}')">Delete</button>
              </td>
            </tr>
          `;
          tbody.innerHTML += row;
        });

        document.getElementById('employeesLoading').style.display = 'none';
      })
      .catch(err => {
        showAlert('employeeAlert', 'Error loading employees', 'error');
        document.getElementById('employeesLoading').style.display = 'none';
      });
    }

    function deleteEmployee(id) {
      if (confirm('Are you sure?')) {
        fetch(`${API_URL}/employees/${id}`, { method: 'DELETE' })
        .then(res => {
          if (!res.ok) {
            return res.json().then(data => Promise.reject(data));
          }
          return res.json();
        })
        .then(() => {
          showAlert('employeeAlert', 'Deleted!', 'success');
          loadEmployees();
        })
        .catch(err => {
          const message = err.message || 'Error deleting employee';
          showAlert('employeeAlert', message, 'error');
          console.error('Delete error:', err);
        });
      }
    }

    //product functions
    function addProduct() {
      const name = document.getElementById('productName').value;
      const sku = document.getElementById('productSku').value;
      const price = parseFloat(document.getElementById('productPrice').value);
      const category = document.getElementById('productCategory').value;
      const quantity = parseInt(document.getElementById('productQuantity').value) || 0;
      const manufacturer = document.getElementById('productManufacturer').value;
      const description = document.getElementById('productDescription').value;

      if (!name || !sku || !price || !category) {
        showAlert('productAlert', 'Please fill in all required fields', 'error');
        return;
      }

      const inventory = { quantity };

      fetch(`${API_URL}/products`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, sku, price, category, manufacturer, description, inventory })
      })
      .then(res => {
        if (!res.ok) {
          return res.json().then(data => Promise.reject(data));
        }
        return res.json();
      })
      .then(data => {
        showAlert('productAlert', 'Product added successfully!', 'success');
        clearProductForm();
        loadProducts();
      })
      .catch(err => {
        const message = err.message || 'Error adding product';
        showAlert('productAlert', message, 'error');
        console.error('Product error:', err);
      });
    }

    function clearProductForm() {
      document.getElementById('productName').value = '';
      document.getElementById('productSku').value = '';
      document.getElementById('productPrice').value = '';
      document.getElementById('productCategory').value = '';
      document.getElementById('productQuantity').value = '';
      document.getElementById('productManufacturer').value = '';
      document.getElementById('productDescription').value = '';
    }

    function loadProducts() {
      document.getElementById('productsLoading').style.display = 'block';
      document.getElementById('productsTable').style.display = 'none';

      fetch(`${API_URL}/products`)
      .then(res => res.json())
      .then(data => {
        const tbody = document.getElementById('productsBody');
        tbody.innerHTML = '';

        //update product dropdown for orders
        const productSelect = document.getElementById('orderProduct');
        productSelect.innerHTML = '<option value="">-- Select Product --</option>';
        data.products.forEach(product => {
          const option = document.createElement('option');
          option.value = product._id;
          option.textContent = `${product.name} (${product.inventory.quantity} in stock)`;
          productSelect.appendChild(option);
        });

        if (data.products.length === 0) {
          document.getElementById('productsEmpty').style.display = 'block';
          document.getElementById('productsTable').style.display = 'none';
          document.getElementById('productsLoading').style.display = 'none';
          return;
        }

        document.getElementById('productsEmpty').style.display = 'none';
        document.getElementById('productsTable').style.display = 'table';

        data.products.forEach(product => {
          const row = `
            <tr>
              <td>${product._id.substring(0, 8)}...</td>
              <td>${product.name}</td>
              <td>${product.sku}</td>
              <td>$${product.price.toFixed(2)}</td>
              <td>${product.category}</td>
              <td>${product.inventory.quantity}</td>
              <td class="action-buttons">
                <button class="btn-danger" onclick="deleteProduct('${product._id}')">Delete</button>
              </td>
            </tr>
          `;
          tbody.innerHTML += row;
        });

        document.getElementById('productsLoading').style.display = 'none';
      })
      .catch(err => {
        showAlert('productAlert', 'Error loading products', 'error');
        document.getElementById('productsLoading').style.display = 'none';
      });
    }

    function deleteProduct(id) {
      if (confirm('Are you sure?')) {
        fetch(`${API_URL}/products/${id}`, { method: 'DELETE' })
        .then(res => {
          if (!res.ok) {
            return res.json().then(data => Promise.reject(data));
          }
          return res.json();
        })
        .then(() => {
          showAlert('productAlert', 'Deleted!', 'success');
          loadProducts();
        })
        .catch(err => {
          const message = err.message || 'Error deleting product';
          showAlert('productAlert', message, 'error');
          console.error('Delete error:', err);
        });
      }
    }

    //order functions
    function addOrder() {
      const customerId = document.getElementById('orderCustomer').value;
      const productId = document.getElementById('orderProduct').value;
      const quantity = parseInt(document.getElementById('orderQuantity').value);
      const tax = parseFloat(document.getElementById('orderTax').value) || 0;
      const shippingCost = parseFloat(document.getElementById('orderShipping').value) || 0;
      const notes = document.getElementById('orderNotes').value;

      if (!customerId || !productId || !quantity) {
        showAlert('orderAlert', 'Please select customer, product and quantity', 'error');
        return;
      }

      const items = [{ productId, quantity }];

      fetch(`${API_URL}/orders`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ customerId, items, tax, shippingCost, notes })
      })
      .then(res => {
        if (!res.ok) {
          return res.json().then(data => Promise.reject(data));
        }
        return res.json();
      })
      .then(data => {
        showAlert('orderAlert', 'Order created successfully!', 'success');
        clearOrderForm();
        loadOrders();
        loadProducts();
      })
      .catch(err => {
        const message = err.message || 'Error creating order';
        showAlert('orderAlert', message, 'error');
        console.error('Order error:', err);
      });
    }

    function clearOrderForm() {
      document.getElementById('orderCustomer').value = '';
      document.getElementById('orderProduct').value = '';
      document.getElementById('orderQuantity').value = '';
      document.getElementById('orderStatus').value = 'Pending';
      document.getElementById('orderTax').value = '0';
      document.getElementById('orderShipping').value = '0';
      document.getElementById('orderNotes').value = '';
    }

    function loadOrders() {
      document.getElementById('ordersLoading').style.display = 'block';
      document.getElementById('ordersTable').style.display = 'none';

      Promise.all([
        fetch(`${API_URL}/orders`).then(res => res.json()),
        fetch(`${API_URL}/customers`).then(res => res.json())
      ])
      .then(([orderData, customerData]) => {
        const tbody = document.getElementById('ordersBody');
        tbody.innerHTML = '';

        //update customer dropdown
        const customerSelect = document.getElementById('orderCustomer');
        customerSelect.innerHTML = '<option value="">-- Select Customer --</option>';
        customerData.customers.forEach(customer => {
          const option = document.createElement('option');
          option.value = customer._id;
          option.textContent = `${customer.firstName} ${customer.lastName}`;
          customerSelect.appendChild(option);
        });

        if (orderData.orders.length === 0) {
          document.getElementById('ordersEmpty').style.display = 'block';
          document.getElementById('ordersTable').style.display = 'none';
          document.getElementById('ordersLoading').style.display = 'none';
          return;
        }

        document.getElementById('ordersEmpty').style.display = 'none';
        document.getElementById('ordersTable').style.display = 'table';

        orderData.orders.forEach(order => {
          const row = `
            <tr>
              <td>${order.orderNumber}</td>
              <td>${order.customerName}</td>
              <td>${order.items.length} item(s)</td>
              <td>$${order.total.toFixed(2)}</td>
              <td>${order.status}</td>
              <td>${new Date(order.orderDate).toLocaleDateString()}</td>
              <td class="action-buttons">
                <button class="btn-danger" onclick="deleteOrder('${order._id}')">Delete</button>
              </td>
            </tr>
          `;
          tbody.innerHTML += row;
        });

        document.getElementById('ordersLoading').style.display = 'none';
      })
      .catch(err => {
        showAlert('orderAlert', 'Error loading orders', 'error');
        document.getElementById('ordersLoading').style.display = 'none';
      });
    }

    function deleteOrder(id) {
      if (confirm('Are you sure?')) {
        fetch(`${API_URL}/orders/${id}`, { method: 'DELETE' })
        .then(res => {
          if (!res.ok) {
            return res.json().then(data => Promise.reject(data));
          }
          return res.json();
        })
        .then(() => {
          showAlert('orderAlert', 'Deleted!', 'success');
          loadOrders();
          loadProducts();
        })
        .catch(err => {
          const message = err.message || 'Error deleting order';
          showAlert('orderAlert', message, 'error');
          console.error('Delete error:', err);
        });
      }
    }

    //initial load
    window.addEventListener('load', () => {
      loadCustomers();
    });
  </script>
</body>
</html>
